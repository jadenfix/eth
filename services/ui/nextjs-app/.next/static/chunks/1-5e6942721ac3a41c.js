"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{10001:function(e,i,t){t.d(i,{kH:function(){return o.DockableLayout},m0:function(){return C},aM:function(){return I},bN:function(){return r.bN},f6:function(){return T}}),t(79165);var s=t(6018),n=t(55854),r=t(70733),o=t(5733),a=t(74512),l=t(32735),c=t(65905),d=t(32105),h=t(65450),x=t(7603),g=t(99199),p=t(82011),u=t(8143),y=t(30740),f=t(5706),b=t(73302),m=t(47983),j=t(46563),z=t(86304),w=t(49025);let S=e=>{var i;let{layoutType:t,onLayoutChange:n,showLabels:r,onToggleLabels:o,nodeScale:l,onNodeScaleChange:j,edgeWidth:z,onEdgeWidthChange:w,onFitToScreen:S,onResetZoom:v,onExport:C,selectedCount:k,onClearSelection:O}=e,E=[{value:"force",label:"Force Directed"},{value:"circular",label:"Circular"},{value:"hierarchical",label:"Hierarchical"},{value:"grid",label:"Grid"}];return(0,a.jsxs)(c.g,{spacing:4,align:"stretch",p:4,bg:(0,d.ff)("white","gray.800"),children:[(0,a.jsxs)(h.x,{children:[(0,a.jsx)(x.x,{fontSize:"xs",fontWeight:"semibold",color:"gray.600",mb:2,children:"Layout"}),(0,a.jsxs)(g.v,{children:[(0,a.jsx)(p.j,{as:u.z,size:"sm",variant:"outline",rightIcon:(0,a.jsx)(s.JO,{name:"chevron-down",size:"xs"}),children:(null===(i=E.find(e=>e.value===t))||void 0===i?void 0:i.label)||"Force Directed"}),(0,a.jsx)(y.q,{children:E.map(e=>(0,a.jsxs)(f.s,{onClick:()=>n(e.value),children:[(0,a.jsx)(s.JO,{name:"graph",size:"sm",mr:2}),e.label]},e.value))})]})]}),(0,a.jsxs)(h.x,{children:[(0,a.jsx)(x.x,{fontSize:"xs",fontWeight:"semibold",color:"gray.600",mb:2,children:"Display"}),(0,a.jsx)(c.g,{spacing:2,align:"stretch",children:(0,a.jsxs)(b.U,{children:[(0,a.jsx)(u.z,{size:"xs",variant:r?"primary":"outline",onClick:o,leftIcon:(0,a.jsx)(s.JO,{name:"tag",size:"xs"}),children:"Labels"}),k>0&&(0,a.jsxs)(u.z,{size:"xs",variant:"outline",onClick:O,leftIcon:(0,a.jsx)(s.JO,{name:"close",size:"xs"}),children:["Clear (",k,")"]})]})})]}),(0,a.jsxs)(h.x,{children:[(0,a.jsx)(x.x,{fontSize:"xs",fontWeight:"semibold",color:"gray.600",mb:2,children:"Node Size"}),(0,a.jsxs)(m.iR,{value:l,onChange:j,min:.5,max:2,step:.1,size:"sm",children:[(0,a.jsx)(m.Uj,{children:(0,a.jsx)(m.Ms,{})}),(0,a.jsx)(m.gs,{})]}),(0,a.jsxs)(b.U,{justify:"space-between",mt:1,children:[(0,a.jsx)(x.x,{fontSize:"xs",color:"gray.500",children:"Small"}),(0,a.jsx)(x.x,{fontSize:"xs",color:"gray.500",children:"Large"})]})]}),(0,a.jsxs)(h.x,{children:[(0,a.jsx)(x.x,{fontSize:"xs",fontWeight:"semibold",color:"gray.600",mb:2,children:"Edge Width"}),(0,a.jsxs)(m.iR,{value:z,onChange:w,min:1,max:5,step:.5,size:"sm",children:[(0,a.jsx)(m.Uj,{children:(0,a.jsx)(m.Ms,{})}),(0,a.jsx)(m.gs,{})]}),(0,a.jsxs)(b.U,{justify:"space-between",mt:1,children:[(0,a.jsx)(x.x,{fontSize:"xs",color:"gray.500",children:"Thin"}),(0,a.jsx)(x.x,{fontSize:"xs",color:"gray.500",children:"Thick"})]})]}),(0,a.jsxs)(h.x,{children:[(0,a.jsx)(x.x,{fontSize:"xs",fontWeight:"semibold",color:"gray.600",mb:2,children:"View"}),(0,a.jsxs)(c.g,{spacing:1,children:[(0,a.jsx)(u.z,{size:"xs",variant:"ghost",onClick:S,leftIcon:(0,a.jsx)(s.JO,{name:"expand",size:"xs"}),children:"Fit to Screen"}),(0,a.jsx)(u.z,{size:"xs",variant:"ghost",onClick:v,leftIcon:(0,a.jsx)(s.JO,{name:"refresh",size:"xs"}),children:"Reset Zoom"}),(0,a.jsx)(u.z,{size:"xs",variant:"ghost",onClick:C,leftIcon:(0,a.jsx)(s.JO,{name:"download",size:"xs"}),children:"Export Image"})]})]})]})},v=e=>{var i;let{node:t,onClose:n}=e;return t?(0,a.jsx)(h.x,{position:"absolute",top:"20px",right:"20px",width:"300px",bg:(0,d.ff)("white","gray.800"),border:"1px solid",borderColor:(0,d.ff)("gray.200","gray.600"),borderRadius:"lg",shadow:"lg",p:4,zIndex:10,children:(0,a.jsxs)(c.g,{spacing:3,align:"stretch",children:[(0,a.jsxs)(b.U,{children:[(0,a.jsx)(s.JO,{name:t.type,color:(e=>{switch(e){case"address":return z.O9.entity.address;case"contract":return z.O9.entity.contract;case"transaction":return z.O9.entity.transaction;case"token":return z.O9.entity.token;case"block":return z.O9.entity.block;default:return z.O9.gray[500]}})(t.type),size:"md"}),(0,a.jsxs)(c.g,{spacing:0,align:"start",flex:"1",children:[(0,a.jsx)(x.x,{...w.sq.body,children:t.label}),(0,a.jsx)(j.C,{colorScheme:"blue",fontSize:"xs",children:t.type.toUpperCase()})]}),(0,a.jsx)(u.z,{size:"xs",variant:"ghost",onClick:n,children:(0,a.jsx)(s.JO,{name:"close",size:"xs"})})]}),void 0!==t.riskScore&&(0,a.jsxs)(b.U,{justify:"space-between",children:[(0,a.jsx)(x.x,{fontSize:"sm",color:"gray.600",children:"Risk Score"}),(0,a.jsxs)(j.C,{colorScheme:"red",fontSize:"xs",bg:(i=t.riskScore)>=80?z.O9.risk.critical:i>=60?z.O9.risk.high:i>=40?z.O9.risk.medium:z.O9.risk.low,color:"white",children:[t.riskScore,"/100"]})]}),void 0!==t.balance&&(0,a.jsxs)(b.U,{justify:"space-between",children:[(0,a.jsx)(x.x,{fontSize:"sm",color:"gray.600",children:"Balance"}),(0,a.jsxs)(x.x,{fontSize:"sm",fontWeight:"medium",children:[t.balance.toLocaleString()," ETH"]})]}),void 0!==t.txCount&&(0,a.jsxs)(b.U,{justify:"space-between",children:[(0,a.jsx)(x.x,{fontSize:"sm",color:"gray.600",children:"Transactions"}),(0,a.jsx)(x.x,{fontSize:"sm",fontWeight:"medium",children:t.txCount.toLocaleString()})]}),t.metadata&&Object.keys(t.metadata).length>0&&(0,a.jsxs)(h.x,{children:[(0,a.jsx)(x.x,{fontSize:"xs",fontWeight:"semibold",color:"gray.600",mb:2,children:"Additional Info"}),(0,a.jsx)(c.g,{spacing:1,align:"stretch",children:Object.entries(t.metadata).slice(0,5).map(e=>{let[i,t]=e;return(0,a.jsxs)(b.U,{justify:"space-between",children:[(0,a.jsx)(x.x,{fontSize:"xs",color:"gray.500",textTransform:"capitalize",children:i.replace(/([A-Z])/g," $1")}),(0,a.jsx)(x.x,{fontSize:"xs",fontWeight:"medium",noOfLines:1,children:String(t)})]},i)})})]}),(0,a.jsxs)(b.U,{spacing:2,children:[(0,a.jsxs)(u.z,{size:"xs",variant:"primary",flex:"1",children:[(0,a.jsx)(s.JO,{name:"search",size:"xs",mr:1}),"Explore"]}),(0,a.jsxs)(u.z,{size:"xs",variant:"outline",flex:"1",children:[(0,a.jsx)(s.JO,{name:"flag",size:"xs",mr:1}),"Flag"]})]})]})}):null},C=e=>{let{data:i,isLoading:t=!1,width:r=800,height:o=600,onNodeClick:g,onEdgeClick:p,onNodeHover:y,onEdgeHover:f,onSelectionChange:m,layoutType:j="force",showLabels:C=!0,enableZoom:k=!0,enablePan:O=!0,enableSelection:E=!0}=e,[R,T]=(0,l.useState)(null),[_,A]=(0,l.useState)([]),[L,M]=(0,l.useState)([]),[I,D]=(0,l.useState)(j),[G,P]=(0,l.useState)(C),[N,H]=(0,l.useState)(1),[U,J]=(0,l.useState)(2),[W,V]=(0,l.useState)(!1),F=(0,l.useRef)(null),Y=(0,l.useRef)(null),q=(0,d.ff)("black","white"),B=(0,l.useCallback)(()=>{if(!F.current)return;let e=F.current,t=e.getContext("2d");t&&(t.clearRect(0,0,e.width,e.height),e.width=r,e.height=o,i.edges.forEach(e=>{let s=i.nodes.find(i=>i.id===e.source),n=i.nodes.find(i=>i.id===e.target);s&&n&&(t.beginPath(),t.moveTo(s.x||0,s.y||0),t.lineTo(n.x||0,n.y||0),t.strokeStyle=e.color||z.O9.gray[300],t.lineWidth=(e.width||U)*(e.isSelected?1.5:1),t.stroke())}),i.nodes.forEach(e=>{let i=(e.size||10)*N*(e.isSelected?1.2:1);t.beginPath(),t.arc(e.x||0,e.y||0,i,0,2*Math.PI),t.fillStyle=e.color||z.O9.primary[500],t.fill(),e.isSelected&&(t.strokeStyle=z.O9.primary[700],t.lineWidth=2,t.stroke()),G&&e.label&&(t.fillStyle=q,t.font="12px Inter",t.textAlign="center",t.fillText(e.label,e.x||0,(e.y||0)+i+15))}))},[i,r,o,N,U,G,q]);(0,l.useEffect)(()=>{B()},[B]);let Z=(0,l.useCallback)(e=>{if(!F.current)return;let t=F.current.getBoundingClientRect(),s=e.clientX-t.left,n=e.clientY-t.top,r=i.nodes.find(e=>{let i=e.x||0;return Math.sqrt((s-i)**2+(n-(e.y||0))**2)<=(e.size||10)*N});r?(T(r),g&&g(r)):T(null)},[i.nodes,N,g]),X=(0,l.useCallback)(()=>{console.log("Fitting graph to screen")},[]),$=(0,l.useCallback)(()=>{console.log("Resetting zoom")},[]),K=(0,l.useCallback)(()=>{if(!F.current)return;let e=document.createElement("a");e.download="graph-export.png",e.href=F.current.toDataURL(),e.click()},[]),Q=(0,l.useCallback)(()=>{A([]),M([]),T(null),m&&m([],[])},[m]);return t?(0,a.jsx)(h.x,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bg:(0,d.ff)("gray.50","gray.900"),children:(0,a.jsxs)(c.g,{spacing:4,children:[(0,a.jsx)(n.$j,{size:"lg",variant:"ring"}),(0,a.jsx)(x.x,{color:"gray.500",...w.sq.body,children:"Loading graph data..."})]})}):(0,a.jsxs)(h.x,{position:"relative",width:"100%",height:"100%",overflow:"hidden",children:[(0,a.jsxs)(h.x,{ref:Y,width:"100%",height:"100%",bg:(0,d.ff)("white","gray.900"),position:"relative",children:[(0,a.jsx)("canvas",{ref:F,width:r,height:o,onClick:Z,style:{width:"100%",height:"100%",cursor:O?"grab":"default"}}),(0,a.jsx)(h.x,{position:"absolute",bottom:"20px",left:"20px",bg:(0,d.ff)("white","gray.800"),px:3,py:2,borderRadius:"md",shadow:"sm",border:"1px solid",borderColor:(0,d.ff)("gray.200","gray.600"),children:(0,a.jsxs)(b.U,{spacing:4,children:[(0,a.jsxs)(b.U,{spacing:1,children:[(0,a.jsx)(s.JO,{name:"graph",size:"xs",color:"gray.500"}),(0,a.jsxs)(x.x,{fontSize:"xs",color:"gray.600",children:[i.nodes.length," nodes"]})]}),(0,a.jsxs)(b.U,{spacing:1,children:[(0,a.jsx)(s.JO,{name:"link",size:"xs",color:"gray.500"}),(0,a.jsxs)(x.x,{fontSize:"xs",color:"gray.600",children:[i.edges.length," edges"]})]}),_.length>0&&(0,a.jsxs)(b.U,{spacing:1,children:[(0,a.jsx)(s.JO,{name:"check",size:"xs",color:z.O9.primary[500]}),(0,a.jsxs)(x.x,{fontSize:"xs",color:z.O9.primary[500],children:[_.length," selected"]})]})]})}),(0,a.jsx)(h.x,{position:"absolute",top:"20px",left:"20px",children:(0,a.jsx)(u.z,{size:"sm",variant:W?"primary":"outline",onClick:()=>V(!W),leftIcon:(0,a.jsx)(s.JO,{name:"settings",size:"sm"}),children:"Controls"})})]}),W&&(0,a.jsx)(h.x,{position:"absolute",top:"0",left:"0",width:"300px",height:"100%",bg:(0,d.ff)("white","gray.800"),borderRight:"1px solid",borderColor:(0,d.ff)("gray.200","gray.600"),shadow:"lg",zIndex:5,children:(0,a.jsxs)(c.g,{spacing:0,height:"100%",children:[(0,a.jsxs)(b.U,{justify:"space-between",w:"100%",p:4,borderBottom:"1px solid",borderColor:(0,d.ff)("gray.200","gray.600"),children:[(0,a.jsx)(x.x,{...w.sq.h4,children:"Graph Controls"}),(0,a.jsx)(u.z,{size:"xs",variant:"ghost",onClick:()=>V(!1),children:(0,a.jsx)(s.JO,{name:"close",size:"xs"})})]}),(0,a.jsx)(h.x,{flex:"1",overflow:"auto",width:"100%",children:(0,a.jsx)(S,{layoutType:I,onLayoutChange:e=>D(e),showLabels:G,onToggleLabels:()=>P(!G),nodeScale:N,onNodeScaleChange:H,edgeWidth:U,onEdgeWidthChange:J,onFitToScreen:X,onResetZoom:$,onExport:K,selectedCount:_.length+L.length,onClearSelection:Q})})]})}),(0,a.jsx)(v,{node:R,onClose:()=>T(null)})]})};t(701);var k=t(21455),O=t(11093),E=t(70444);let R=(0,k.B1)({config:{initialColorMode:"light",useSystemColorMode:!0},colors:{primary:z.O9.primary,gray:z.O9.gray,semantic:{success:z.O9.success,warning:z.O9.warning,error:z.O9.error,info:z.O9.info},risk:z.O9.risk,entity:z.O9.entity},fonts:{heading:w.Rq.heading,body:w.Rq.body,mono:w.Rq.mono},fontSizes:w.CH,fontWeights:w.vC,transitions:{property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform"},easing:{ease:"cubic-bezier(0.25, 0.1, 0.25, 1.0)","ease-in":"cubic-bezier(0.42, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.58, 1)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}},components:{Button:{baseStyle:{fontWeight:"medium",borderRadius:"md",transition:E.ff.button},variants:{primary:{bg:"primary.600",color:"white",_hover:{bg:"primary.700",transform:"translateY(-1px)"},_active:{bg:"primary.800",transform:"translateY(0px)"}}}},Card:{baseStyle:{container:{borderRadius:"lg",boxShadow:"md",transition:E.ff.hover,_hover:{boxShadow:"lg"}}}},Modal:{baseStyle:{dialog:{borderRadius:"xl",boxShadow:"2xl"},overlay:{backdropFilter:"blur(4px)"}}}},styles:{global:e=>({body:{bg:"dark"===e.colorMode?"gray.900":"gray.50",color:"dark"===e.colorMode?"white":"gray.800",fontFamily:"body"},"*::placeholder":{color:"dark"===e.colorMode?"gray.400":"gray.500"},"*, *::before, &::after":{borderColor:"dark"===e.colorMode?"gray.600":"gray.200"}})}}),T=e=>{let{children:i}=e;return(0,a.jsx)(O.x,{theme:R,resetCSS:!0,children:i})},_={panels:[],activePanel:null,isGridVisible:!1,snapToGrid:!0,gridSize:20,layoutHistory:[],currentHistoryIndex:-1,maxHistoryLength:20},A=(e,i)=>{switch(i.type){case"ADD_PANEL":{let t={...i.panel,id:"panel_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),zIndex:Math.max(...e.panels.map(e=>e.zIndex||0),0)+1};return{...e,panels:[...e.panels,t],activePanel:t.id}}case"UPDATE_PANEL":return{...e,panels:e.panels.map(e=>e.id===i.id?{...e,...i.updates}:e)};case"REMOVE_PANEL":{let t=e.panels.filter(e=>e.id!==i.id);return{...e,panels:t,activePanel:e.activePanel===i.id?t.length>0?t[0].id:null:e.activePanel}}case"SET_ACTIVE_PANEL":{let t=i.id?e.panels.map(t=>({...t,zIndex:t.id===i.id?Math.max(...e.panels.map(e=>e.zIndex||0))+1:t.zIndex})):e.panels;return{...e,panels:t,activePanel:i.id}}case"TOGGLE_GRID":return{...e,isGridVisible:void 0!==i.visible?i.visible:!e.isGridVisible};case"TOGGLE_SNAP_TO_GRID":return{...e,snapToGrid:void 0!==i.enabled?i.enabled:!e.snapToGrid};case"SET_GRID_SIZE":return{...e,gridSize:i.size};case"LOAD_LAYOUT":return{...e,panels:i.panels,activePanel:i.panels.length>0?i.panels[0].id:null};case"SAVE_SNAPSHOT":{let t={id:"snapshot_".concat(Date.now()),timestamp:Date.now(),panels:JSON.parse(JSON.stringify(e.panels)),name:i.name||"Layout ".concat(e.layoutHistory.length+1)},s=[...e.layoutHistory.slice(0,e.currentHistoryIndex+1),t].slice(-e.maxHistoryLength);return{...e,layoutHistory:s,currentHistoryIndex:s.length-1}}case"RESTORE_SNAPSHOT":{let t=e.layoutHistory[i.index];if(!t)return e;return{...e,panels:JSON.parse(JSON.stringify(t.panels)),activePanel:t.panels.length>0?t.panels[0].id:null,currentHistoryIndex:i.index}}case"CLEAR_LAYOUT":return{...e,panels:[],activePanel:null};case"ARRANGE_PANELS":{let t=L(e.panels,i.arrangement);return{...e,panels:t}}default:return e}},L=(e,i)=>{let t=window.innerWidth,s=window.innerHeight;switch(i){case"tile":{let i=Math.ceil(Math.sqrt(e.length)),n=Math.ceil(e.length/i),r=Math.floor(t/i),o=Math.floor(s/n);return e.map((e,t)=>({...e,position:{...e.position,x:t%i*r,y:Math.floor(t/i)*o,width:r-10,height:o-10}}))}case"cascade":return e.map((e,i)=>({...e,position:{...e.position,x:30*i,y:30*i,width:Math.min(600,t-30*i-50),height:Math.min(400,s-30*i-50)}}));case"stack":{let i=Math.min(800,t-100),n=Math.min(600,s-100),r=(t-i)/2,o=(s-n)/2;return e.map((t,s)=>({...t,position:{...t.position,x:r+5*s,y:o+5*s,width:i,height:n},zIndex:e.length-s}))}default:return e}},M=(0,l.createContext)(void 0),I=e=>{let{children:i,initialPanels:s=[],persistLayout:n=!0,storageKey:r="palantir_layout"}=e,[o,c]=(0,l.useReducer)(A,{..._,panels:s,activePanel:s.length>0?s[0].id:null});(0,l.useEffect)(()=>{if(n)try{let e=localStorage.getItem(r);if(e){let{panels:i,settings:t}=JSON.parse(e);i&&Array.isArray(i)&&(c({type:"LOAD_LAYOUT",panels:i}),t&&(void 0!==t.isGridVisible&&c({type:"TOGGLE_GRID",visible:t.isGridVisible}),void 0!==t.snapToGrid&&c({type:"TOGGLE_SNAP_TO_GRID",enabled:t.snapToGrid}),void 0!==t.gridSize&&c({type:"SET_GRID_SIZE",size:t.gridSize})))}}catch(e){console.warn("Failed to load saved layout:",e)}},[n,r]),(0,l.useEffect)(()=>{if(n)try{let e={panels:o.panels,settings:{isGridVisible:o.isGridVisible,snapToGrid:o.snapToGrid,gridSize:o.gridSize},lastSaved:Date.now()};localStorage.setItem(r,JSON.stringify(e))}catch(e){console.warn("Failed to save layout:",e)}},[o.panels,o.isGridVisible,o.snapToGrid,o.gridSize,n,r]);let d=(0,l.useCallback)(e=>{c({type:"ADD_PANEL",panel:e})},[]),h=(0,l.useCallback)((e,i)=>{c({type:"UPDATE_PANEL",id:e,updates:i})},[]),x=(0,l.useCallback)(e=>{c({type:"REMOVE_PANEL",id:e})},[]),g=(0,l.useCallback)(e=>{c({type:"SET_ACTIVE_PANEL",id:e})},[]),p=(0,l.useCallback)(()=>{c({type:"CLEAR_LAYOUT"})},[]),u=(0,l.useCallback)(e=>{c({type:"SAVE_SNAPSHOT",name:e})},[]),y=(0,l.useCallback)(e=>{c({type:"RESTORE_SNAPSHOT",index:e})},[]),f=(0,l.useCallback)(e=>{c({type:"ARRANGE_PANELS",arrangement:e})},[]),b=(0,l.useCallback)(e=>{Promise.resolve().then(t.bind(t,5733)).then(i=>{let{layoutTemplates:t}=i,s=window.innerWidth,n=window.innerHeight,r=t[e];r&&"function"==typeof r&&c({type:"LOAD_LAYOUT",panels:r(s,n).map((i,t)=>({...i,id:"template_".concat(e,"_").concat(t,"_").concat(Date.now()),isDraggable:!0,isResizable:!0,zIndex:t+1}))})}).catch(e=>{console.error("Failed to load template:",e)})},[]);return(0,a.jsx)(M.Provider,{value:{state:o,dispatch:c,addPanel:d,updatePanel:h,removePanel:x,setActivePanel:g,clearLayout:p,saveSnapshot:u,restoreSnapshot:y,arrangeLayout:f,loadTemplate:b},children:i})}},5733:function(e,i,t){t.r(i),t.d(i,{DockableLayout:function(){return b},layoutTemplates:function(){return m}});var s=t(74512),n=t(32735),r=t(32105),o=t(65450),a=t(65905),l=t(3217),c=t(28660),d=t(40618),h=t(70171),x=t(20483),g=t(86304),p=t(70444);let u=(e,i,t,s)=>{let[r,o]=(0,n.useState)(!1),a=(0,n.useRef)(null),l=(0,n.useRef)({x:0,y:0}),c=(0,n.useRef)({width:0,height:0}),d=(0,n.useCallback)(i=>{e.isResizable&&(o(!0),l.current={x:i.clientX,y:i.clientY},c.current={width:e.position.width,height:e.position.height},i.preventDefault(),i.stopPropagation())},[e.isResizable,e.position]),h=(0,n.useCallback)(n=>{if(!r)return;let o=n.clientX-l.current.x,a=n.clientY-l.current.y,d=c.current.width+o,h=c.current.height+a;d=Math.max(d,3*t),h=Math.max(h,2*t),s&&(d=Math.round(d/t)*t,h=Math.round(h/t)*t),i({position:{...e.position,width:d,height:h}})},[r,t,s,e.position,i]),x=(0,n.useCallback)(()=>{o(!1)},[]);return n.useEffect(()=>{if(r)return document.addEventListener("mousemove",h),document.addEventListener("mouseup",x),document.body.style.cursor="se-resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",x),document.body.style.cursor="",document.body.style.userSelect=""}},[r,h,x]),{resizeRef:a,isResizing:r,handleMouseDown:d}},y=e=>{let{panel:i,onUpdate:t,onClose:n,gridSize:d,snapToGrid:h}=e,{resizeRef:y,isResizing:f,handleMouseDown:b}=u(i,t,d,h),[{isDragging:m},j,z]=(0,l.c)({type:"panel",item:{id:i.id,type:i.type},canDrag:i.isDraggable&&!f,collect:e=>({isDragging:e.isDragging()})}),[,w]=(0,c.L)({accept:"panel",hover:(e,s)=>{var n;if(e.id===i.id)return;let r=null===(n=y.current)||void 0===n?void 0:n.getBoundingClientRect();if(!r)return;let o=s.getClientOffset();if(!o)return;let a=o.x-r.width/2,l=o.y-r.height/2;h&&(a=Math.round(a/d)*d,l=Math.round(l/d)*d),a=Math.max(0,a),l=Math.max(0,l),t({position:{...i.position,x:a,y:l}})}}),S=e=>{y.current=e,j(w(e))},v=(0,r.ff)("white","gray.900"),C=(0,r.ff)("gray.200","gray.600"),k=(0,r.ff)("rgba(0, 0, 0, 0.1)","rgba(0, 0, 0, 0.3)"),O=i.component;return i.isMinimized?(0,s.jsx)(o.x,{ref:S,position:"absolute",bottom:"20px",left:"".concat(i.position.x,"px"),width:"200px",height:"40px",bg:v,border:"1px solid",borderColor:C,borderRadius:"md",shadow:"md",opacity:m?.5:1,cursor:i.isDraggable?"move":"default",zIndex:i.zIndex||1,transition:p.ff.panel,children:(0,s.jsx)(x.V9,{title:i.title,onMaximize:()=>t({isMinimized:!1}),onClose:n,isDraggable:i.isDraggable,dragHandle:!0})}):(0,s.jsxs)(o.x,{ref:S,position:"absolute",left:"".concat(i.position.x,"px"),top:"".concat(i.position.y,"px"),width:"".concat(i.position.width,"px"),height:"".concat(i.position.height,"px"),bg:v,border:"1px solid",borderColor:C,borderRadius:"lg",shadow:m?"0 8px 25px ".concat(k):"0 4px 12px ".concat(k),opacity:m?.8:1,zIndex:i.zIndex||1,overflow:"hidden",transition:p.ff.panel,_hover:{shadow:"0 6px 20px ".concat(k)},children:[(0,s.jsxs)(a.g,{spacing:0,height:"100%",children:[(0,s.jsx)(x.V9,{title:i.title,subtitle:i.subtitle,onClose:n,onMinimize:()=>t({isMinimized:!0}),onMaximize:()=>t({isMaximized:!i.isMaximized,position:i.isMaximized?i.position:{x:0,y:0,width:window.innerWidth,height:window.innerHeight}}),isCollapsible:!0,isCollapsed:i.isCollapsed,onToggleCollapse:()=>t({isCollapsed:!i.isCollapsed}),isResizable:i.isResizable,isDraggable:i.isDraggable,dragHandle:!0}),!i.isCollapsed&&(0,s.jsx)(o.x,{flex:"1",width:"100%",overflow:"hidden",children:(0,s.jsx)(O,{...i.props})})]}),i.isResizable&&!i.isCollapsed&&(0,s.jsx)(o.x,{position:"absolute",bottom:"0",right:"0",width:"15px",height:"15px",cursor:"se-resize",onMouseDown:b,_hover:{bg:g.O9.primary[100]},children:(0,s.jsx)(o.x,{position:"absolute",bottom:"2px",right:"2px",width:"10px",height:"10px",borderRight:"2px solid",borderBottom:"2px solid",borderColor:"gray.400",opacity:.6})})]})},f=e=>{let{gridSize:i,show:t}=e;return t?(0,s.jsx)(o.x,{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.1,pointerEvents:"none",backgroundImage:"\n        linear-gradient(to right, ".concat(g.O9.gray[300]," 1px, transparent 1px),\n        linear-gradient(to bottom, ").concat(g.O9.gray[300]," 1px, transparent 1px)\n      "),backgroundSize:"".concat(i,"px ").concat(i,"px")}):null},b=e=>{let{panels:i,onPanelUpdate:t,onPanelClose:a,onPanelAdd:l,gridSize:c=20,snapToGrid:x=!1,showGrid:g=!1,maxPanels:p=10}=e,u=(0,n.useCallback)((e,i)=>{t&&t(e,i)},[t]),b=(0,n.useCallback)(e=>{a&&a(e)},[a]);return(0,s.jsx)(d.W,{backend:h.PD,children:(0,s.jsxs)(o.x,{position:"relative",width:"100%",height:"100vh",bg:(0,r.ff)("gray.50","gray.800"),overflow:"hidden",children:[(0,s.jsx)(f,{gridSize:c,show:g}),i.map(e=>(0,s.jsx)(y,{panel:e,onUpdate:i=>u(e.id,i),onClose:()=>b(e.id),gridSize:c,snapToGrid:x},e.id))]})})},m={explorer:(e,i)=>[{type:"graph-explorer",title:"Network Graph",position:{x:0,y:0,width:.6*e,height:.7*i}},{type:"data-table",title:"Transaction Details",position:{x:.6*e,y:0,width:.4*e,height:.5*i}},{type:"timeseries-chart",title:"Activity Timeline",position:{x:0,y:.7*i,width:e,height:.3*i}}],dashboard:(e,i)=>[{type:"timeseries-chart",title:"Transaction Volume",position:{x:0,y:0,width:.5*e,height:.4*i}},{type:"compliance-map",title:"Risk Heatmap",position:{x:.5*e,y:0,width:.5*e,height:.4*i}},{type:"data-table",title:"High Risk Addresses",position:{x:0,y:.4*i,width:e,height:.6*i}}],analysis:(e,i)=>[{type:"graph-explorer",title:"Address Cluster",position:{x:0,y:0,width:.7*e,height:.6*i}},{type:"code-console",title:"Analysis Console",position:{x:0,y:.6*i,width:.7*e,height:.4*i}},{type:"data-table",title:"Evidence Table",position:{x:.7*e,y:0,width:.3*e,height:i}}]};i.default=b}}]);